<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,200;1,300;1,400;1,500;1,600;1,700&
    family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700&display=swap"
        rel="stylesheet">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,200;1,300;1,400;1,500;1,600;1,700&family=Kurale&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">

    <link rel="stylesheet" href="../../assets/css/header.css">
    <link rel="stylesheet" href="../../assets/css/Profile-CSS/profile page.css">

    <link rel="stylesheet" href="../../assets/css/normalize.css">

    <link rel="icon" href="../../assets/img/main-logo.png">
    <title>Profile</title>
</head>

<body>
    <!-- header starts -->
    <!-- <header> 
        <div class="bx bx-menu" id="toggle" onclick="openNav()"></div>

        <div class="icon-left">
            <img src="../../assets/img/main-logo.png" alt="Company Logo" class="logo"/>
            <h1>SR</h1>
            <div>
                <p>Catering</p>
            </div>
        </div>
        
        <ul class="navigation" id="sidenav">
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>

            <li><a href="../../index.html" class="navigation-link">HOME</a></li>
            <li class="dropdown">
                <span class="navigation-link">MENU</span>
                <div class="dropdown-content">
                    <div>
                        <a href="../products/Menus/menu-morning.html" >Breakfast Menu</a>
                        <a href="../products/Menus/menu-lunch.html" >Lunch Menu</a>
                        <a href="../products/Menus/menu-hightea.html" >Hightea Menu</a>
                        <a href="../products/Menus/menu-dinner.html" >Dinner Menu</a>
                        <a href="../products/Menus/menu-custom.html" >Custom Menu</a>
                    </div>
                </div>
            </li>
            <li><a href="../homepage/Events/events.html" class="navigation-link">EVENTS</a></li>
            <li><a href="../homepage/about us.html" class="navigation-link">ABOUT US</a></li>
            <li><a href="../homepage/contact us.html" class="navigation-link">CONTACT US</a></li>
            <li><a href="../homepage/my cart.html" class="navigation-link">MY CART</a></li>
        </ul>

        <div class="dropdown_profile">
            <img src="../../assets/img/profile.png" alt="profile image"  />
            <div class="dropdown_profile-content">
                <div>
                    <a href="../profile/Profile page.html">My Profile</a>
                    <a href="../profile/register.html">Register</a>
                    <a href="../profile/Login.html">Log in</a>
                    <a href="../profile/my orders.html">My Orders</a>
                </div>
            </div>
        </div>
    </header> -->
    <!-- header ends -->

    <!-- main starts -->
    <main>
        <!-- profile starts -->
        <section class="profile">

            <form>
                <div class="top">
                    <h2 class="heading"><span>My</span> Profile</h2>
                    <!-- <button class="delete btn" type="button" onclick="deleteAcc()">Delete Account</button> -->
                </div>

                <div class="profile_form">

                    <div class="profile_photo">
                        <img class="sr" src="../../assets/img/sr.jpg" alt="profile image" />
                    </div>

                    <div class="details">
                        <label for="name">Name:</label>
                        <input type="text" name="name" id="name" readonly />
                        <label for="email">Email:</label>
                        <input type="email" name="email" id="email" disabled />
                        <label for="number">Phone Number:</label>
                        <input type="number" name="phone no." id="phone_number" disabled />
                        <label for="password">Password:</label>
                        <input type="password" name="password" id="password" readonly />
                    </div>

                </div>

                <div class="btn_content">
                    <button type="button" class="edit btn">
                        <img src="../../assets/img/edit.jpg" alt="edit button" />
                        <p>Edit profile</p>
                    </button>
                    <button type="button" class="save btn" style="display:none;">Save</button>
                    <a href="../../index.html"><button class="btn back" type="button">Back</button></a>
                    <!-- </a> -->
                </div>
                <div class="logout_button">
                    <a href="../../index.html">
                        <button class="logout btn" type="button" id="logout" >Log out</button>
                    </a>
                    
                </div>
            </form>
        </section>
        <!-- profile ends -->
    </main>
    <!-- main ends -->

    <!-- footer starts -->

    <footer>
        <div class="footer-details">
            <p>Copyright Â© 2021 - 2023 SR Catering - Website Designed By <span>vicky</span></p>
            <p>(+91)6379370482</p>
            <div class="footer-links">
                <a href="https://www.instagram.com/vicky_sk_forever?r=nametag"> <img
                        src="../../assets/img/instagram.jpg" alt="instagram" /> </a>
                <a href="https://www.facebook.com/profile.php?id=100011341742455"> <img
                        src="../../assets/img/facebook.jpg" alt="facebook link" /> </a>
                <a href="https://twitter.com/SRVignesh06?t=zGFf0sZZJa_0oe8XfsLkOQ&s=08"> <img
                        src="../../assets/img/twitter.png" alt="twitter link" /> </a>
            </div>
        </div>
    </footer>
    <!-- footer ends -->

    <!-- script starts -->
    <script src="../../assets/JS/header.js"></script>

    <script>
        
        //get value from local storage
        let user_unique = JSON.parse(localStorage.getItem("user_unique"));
        // let unique_id = unique_id_1["email"]
        let userData = JSON.parse(localStorage.getItem("userData"));

        function profile_data(e) {
            return e.email == user_unique;
        }

        // finding the userData which unique_id correctly matches
        person_data = userData.find(profile_data);

        // inserting the data (values) to the correct place in the profile
        document.getElementById("name").value = person_data["name"];
        document.getElementById("email").value = person_data["email"];
        document.getElementById("phone_number").value = person_data["phone_number"];
        document.getElementById("password").value = person_data["password"];



        // delete account function

        // function deleteAcc() {
        //     if (confirm("Are you sure to delete this account ?")) {

        //         //get value from local storage
        //         let user_unique = JSON.parse(localStorage.getItem("user_unique"));
        //         // let unique_id = unique_id_1["email"]
        //         let userData = JSON.parse(localStorage.getItem("userData"));

        //         function profile_data(e) {
        //             return e.email == user_unique;
        //         }

        //         // finding the userData which user_unique correctly matches
        //         let person_data = userData.find(profile_data);

        //         // find the index of person_data from userData
        //         let result = userData.indexOf(person_data);

        //         // deleting the indexof person data
        //         userData.splice(result, 1);

        //         alert("Your Account was deleted")
        //         localStorage.setItem("userData", JSON.stringify(userData));

        //         window.location.href = "../../index.html";
        //     }
        // }


        // logout function
        // function logOut() {
        //     if (confirm("Are you going to Logout ?")) {

        //         // deleting the unique_id of person data
        //         localStorage.setItem("user_id", "");
        //         window.location.href = "../../index.html";
        //     }
        // }



        function update(e) {
            // getting the updated data from the input field
            let up_name = document.getElementById("name").value;
            let up_password = document.getElementById("password").value;
            // paste the updated data to the correct object
            person_data["name"] = up_name;
            person_data["password"] = up_password;
            // again paste it to the 
            localStorage.setItem("userData", JSON.stringify(userData));
        }



        // edit button
        const edit = document.querySelector(".edit");
        edit.addEventListener("click", findReadonly);

        // save button
        const save = document.querySelector(".save");
        save.addEventListener("click", update)
        save.addEventListener("click", findReadonly1)




        function findReadonly(e) {
            document.getElementById("name").removeAttribute("readonly");
            document.getElementById("password").removeAttribute("readonly");
            document.querySelector(".save").removeAttribute("style");
            document.querySelector(".edit").setAttribute("style", "display:none");
            let head = document.querySelector(".heading");
            head.innerHTML = "<span>My</span> Profile-Edit"


        }

        function findReadonly1(e) {
            document.getElementById("name").setAttribute("readonly", "true");
            document.getElementById("password").setAttribute("readonly", "true")
            document.querySelector(".save").setAttribute("style", "display:none")
            document.querySelector(".edit").setAttribute("style", "display:flex");
        }



    </script>
    <!-- script ends -->

</body>

</html>